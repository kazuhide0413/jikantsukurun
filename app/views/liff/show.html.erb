<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

<div class="p-6">
  <h1 class="text-xl font-bold">時間作るん LIFF</h1>
  <p class="mt-2">LIFF 初期化テスト</p>

  <pre id="log"
       class="mt-4 p-3 bg-white rounded border text-xs whitespace-pre-wrap"></pre>
</div>

<script>
  (async () => {
    const log = (msg) => {
      document.getElementById("log").textContent += msg + "\n";
    };

    const liffId = "<%= j @liff_id %>";
    log("LIFF ID: " + liffId);

    try {
      await liff.init({ liffId });
      log("liff.init OK");

      log("isInClient: " + liff.isInClient());
      log("isLoggedIn: " + liff.isLoggedIn());
      log("OS: " + liff.getOS());
      log("Language: " + liff.getLanguage());
    } catch (e) {
      log("ERROR: " + (e.message || e));
      console.error(e);
    }
  })();
</script>
